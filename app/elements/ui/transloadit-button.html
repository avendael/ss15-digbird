<polymer-element name="transloadit-button">
  <template>
    <style>
    </style>

    <form id="upload-form" action="?upload=complete" enctype="multipart/form-data" method="POST">
      <input type="file" name="my_file" multiple="multiple" />
    </form>
  </template>

  <script>
    Polymer('transloadit-button', {
      ready: function() {
        // We reference our html form here
        $(this.$['upload-form']).transloadit({
          fields: {
            // TODO: Gather more information about the file and user here
            // Refer at https://transloadit.com/docs/
          },

          // We want to wait for all encodings to finish before the form
          // is submitted.
          wait: true,
          autoSubmit: false,

          // The upload to Transloadit should start as soon as the user
          // selects some files.
          triggerUploadOnFileSelection: true,

          onSuccess: function(assembly) {
            // TODO: Notify Firebase
          },

          params: {
            auth: {
              // This is your API key.
              // XXX: Security Issue
              key: '63a45f40a3f111e4a63d01e4c9c05480',
              max_size: 1048576
            },
            template_id: "7f964520a3ff11e4ad0f73815468df20"
          }
        });
      }
    });
  </script>
</polymer-element>
