<polymer-element name="transloadit-button">
  <template>
    <style>
    </style>

    <form id="upload-form" action="?upload=complete" enctype="multipart/form-data" method="POST">
      <input type="file" name="my_file" multiple="multiple" />
    </form>
  </template>

  <script>
    Polymer('transloadit-button', {
      ready: function() {
        // We reference our html form here
        $(this.$['upload-form']).transloadit({
          // We want to wait for all encodings to finish before the form
          // is submitted.
          wait: true,
          // The upload to Transloadit should start as soon as the user
          // selects some files.
          triggerUploadOnFileSelection: true,

          params: {
            auth: {
              // This is your API key.
              // TODO: Improve security for this key
              key: '63a45f40a3f111e4a63d01e4c9c05480'
            },
            // Our assembly instructions just contain two steps for now.
            // You can name the steps how you like.
            steps: {
              // The first step resizes the uploaded image(s) to 125x125 pixels.
              // The /image/resize robots ignores any files that are not images
              // automatically.
              resize_to_125: {
                robot: '/image/resize',
                use: ':original',
                width: 125,
                height: 125
              },
              // The second step resizes the results further to 75x75 pixels.
              // Notice how we "use" the output files of the "resize_to_125"
              // step as our input here. We could use all kinds of steps with
              // various robots that "use" each other, making this perfect for
              // any workflow.
              resize_to_75: {
                robot: '/image/resize',
                use: 'resize_to_125',
                width: 75,
                height: 75,
                // We also add a sepia effect here just for fun.
                // The /image/resize robot has a ton of available parameters.
                sepia: 80
              }
            }
          }
        });
      }
    });
  </script>
</polymer-element>
